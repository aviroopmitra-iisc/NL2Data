// ER Diagram
digraph {
	rankdir=TB
	node [shape=plaintext style="rounded,filled"]
	graph [nodesep=1.0 ranksep=1.5 splines=polyline]
	edge [arrowsize=0.8]
	household [label=<<TABLE BORDER="2" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4"><TR><TD BGCOLOR="#7CB342" COLSPAN="2"><B><FONT COLOR="white">household</FONT></B></TD></TR><TR><TD ALIGN="LEFT"><B>household_id</B></TD><TD ALIGN="LEFT">INT</TD></TR></TABLE>> color="#7CB342" fillcolor="#F0F8E8" style="rounded,filled"]
	tariff_plan [label=<<TABLE BORDER="2" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4"><TR><TD BGCOLOR="#7CB342" COLSPAN="2"><B><FONT COLOR="white">tariff_plan</FONT></B></TD></TR><TR><TD ALIGN="LEFT"><B>tariff_plan_id</B></TD><TD ALIGN="LEFT">INT</TD></TR><TR><TD ALIGN="LEFT">baseline_price_per_kwh</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">threshold</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">rebate_rate</TD><TD ALIGN="LEFT">FLOAT</TD></TR></TABLE>> color="#7CB342" fillcolor="#F0F8E8" style="rounded,filled"]
	region [label=<<TABLE BORDER="2" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4"><TR><TD BGCOLOR="#7CB342" COLSPAN="2"><B><FONT COLOR="white">region</FONT></B></TD></TR><TR><TD ALIGN="LEFT"><B>region_id</B></TD><TD ALIGN="LEFT">INT</TD></TR></TABLE>> color="#7CB342" fillcolor="#F0F8E8" style="rounded,filled"]
	consumption [label=<<TABLE BORDER="2" CELLBORDER="1" CELLSPACING="0" CELLPADDING="4"><TR><TD BGCOLOR="#4A90E2" COLSPAN="2"><B><FONT COLOR="white">consumption</FONT></B></TD></TR><TR><TD ALIGN="LEFT"><B>timestamp</B></TD><TD ALIGN="LEFT">DATETIME</TD></TR><TR><TD ALIGN="LEFT"><B>household_id</B></TD><TD ALIGN="LEFT">INT</TD></TR><TR><TD ALIGN="LEFT">region_id (FK)</TD><TD ALIGN="LEFT">INT</TD></TR><TR><TD ALIGN="LEFT">tariff_plan_id (FK)</TD><TD ALIGN="LEFT">INT</TD></TR><TR><TD ALIGN="LEFT">consumption_kwh</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">outdoor_temp_c</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">dynamic_price_per_kwh</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">billing_day</TD><TD ALIGN="LEFT">DATE</TD></TR><TR><TD ALIGN="LEFT">is_peak_hour</TD><TD ALIGN="LEFT">BOOL</TD></TR><TR><TD ALIGN="LEFT">is_weekend</TD><TD ALIGN="LEFT">BOOL</TD></TR><TR><TD ALIGN="LEFT">price_multiplier</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">cost_before_rebate</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">rebate_amount</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">final_cost</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">heating_degree_hours</TD><TD ALIGN="LEFT">FLOAT</TD></TR><TR><TD ALIGN="LEFT">cooling_degree_hours</TD><TD ALIGN="LEFT">FLOAT</TD></TR></TABLE>> color="#4A90E2" fillcolor="#E8F4F8" style="rounded,filled"]
	consumption -> household [label=household_id arrowhead=crow color=black style=dashed]
	consumption -> region [label=region_id arrowhead=crow color=black style=dashed]
	consumption -> tariff_plan [label=tariff_plan_id arrowhead=crow color=black style=dashed]
}
